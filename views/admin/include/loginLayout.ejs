<!DOCTYPE html>
<html lang="<%= getLocale(); %>">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title><%= title %> - <%= __("app_name"); %></title>
    <!-- Favicon-->
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">

    <!-- Bootstrap Core Css -->
    <link href="/backend/plugins/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Waves Effect Css -->
    <link href="/backend/plugins/node-waves/waves.css" rel="stylesheet" />

    <!-- Sweetalert Css -->
    <link href="/backend/plugins/sweetalert/sweetalert.css" rel="stylesheet" />
    
    <!-- Animation Css -->
    <link href="/backend/plugins/animate-css/animate.css" rel="stylesheet" />

    <!-- Custom Css -->
    <link href="/backend/css/style.css" rel="stylesheet">

    <!-- Jquery Core Js -->
    <script src="/backend/plugins/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core Js -->
    <script src="/backend/plugins/bootstrap/js/bootstrap.js"></script>

    <!-- Waves Effect Plugin Js -->
    <script src="/backend/plugins/node-waves/waves.js"></script>

    <!-- SweetAlert Plugin Js -->
    <script src="/backend/plugins/sweetalert/sweetalert.min.js"></script>

    <!-- Validation Plugin Js -->
    <script src="/backend/plugins/jquery-validation/jquery.validate.js"></script>
    <% if(getLocale() == 'ar') { %>
        <script src="/backend/plugins/jquery-validation/localization/messages_ar.js"></script>
    <% } %>
    <script src="/js/socket.io.js"></script>
    <script>
        let session_id = '';
    </script>
</head>

<body class="login-page theme-teal">
    <div class="login-box">
        <div class="logo">
            <a href="/"><%= __('app_name'); %></a>
            <small><%= __('admin_panel'); %></small>
        </div>
        <div class="align-center m-b-15">
            <div class="switch">
                <label><%= __('arabic') %><input name="default_locale" value="<%= getLocale() %>" type="checkbox" <%= getLocale() == 'en' ? 'checked' : '' %>><span class="lever"></span><%= __('english') %></label>
            </div>
        </div>
        <div class="card">
            <div class="body">
                <%- body %>
            </div>
        </div>
    </div>

    <!-- Custom Js -->
    <script src="/backend/js/admin.js"></script>
    <script type="text/javascript">
        $(function() {
            $(document).on('change', '[name=default_locale]', function(e) {
                e.preventDefault();
                let default_locale = $(this).val();
                swal({
                    title: "<%= __('are_you_sure') %>?",
                    text: "<%= __('locale_change_confirmation') %>!",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "<%=  __('locale_confirm_button') %>!",
                    cancelButtonText: "<%=  __('cancel') %>",
                    closeOnConfirm: false,
                    closeOnCancel: true
                }, function (isConfirm) {
                    if (isConfirm) {
                        $.post( "/admin/admins/set-locale",{ locale : default_locale}, function( data ) {
                            swal("<%=  __('updated') %>!", "<%=  __('locale_successful') %>.", "success");
                            window.location.reload();
                        });
                    } else {
                        if($('input[name=default_locale]').prop('checked'))
                        {
                            $('[name=default_locale]').prop('checked',false);
                        } else {
                            $('[name=default_locale]').prop('checked',true);
                        }
                    }
                });

            })
        });
    </script>
</body>

</html>